<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fragments M√ºzik Botu</title>
<meta name="description" content="Fragments M√ºzik Botu - Telegram √ºzerinden hƒ±zlƒ± ve kaliteli m√ºzik indirme. Premium √∂zellikler ve kullanƒ±m rehberi." />
<meta name="theme-color" content="#000000" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap');
  * {
    margin:0; padding:0; box-sizing:border-box;
  }
  html, body {
    height: 100%;
    background: #000;
    font-family: 'Poppins', sans-serif;
    color: #eee;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    padding: 1rem 2rem;
    background: #111111dd;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 9999;
    user-select:none;
  }
  header h1 {
    font-weight: 700;
    font-size: 1.7rem;
    color: #ff4081;
  }
  .clock-lang {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .clock {
    font-weight: 600;
    font-size: 1rem;
    background: #222222cc;
    padding: 0.3rem 0.9rem;
    border-radius: 12px;
    font-variant-numeric: tabular-nums;
    user-select:none;
    min-width: 130px;
    text-align:center;
    color:#ff79a1;
    letter-spacing: 0.02em;
  }
  select#lang-select {
    background: #222222cc;
    border: none;
    color: #ff79a1;
    padding: 0.35rem 0.7rem;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }
  select#lang-select:hover, select#lang-select:focus {
    background: #ff4081;
    color: #fff;
    outline:none;
  }
  main {
    flex-grow: 1;
    padding: 2rem 1.5rem;
    max-width: 900px;
    margin: 0 auto 2rem;
  }
  section {
    margin-bottom: 2.8rem;
    background: #121212dd;
    border-radius: 18px;
    padding: 2rem 2.2rem;
    box-shadow: 0 0 20px #ff4081aa;
  }
  h2 {
    font-weight: 700;
    font-size: 1.8rem;
    margin-bottom: 1.2rem;
    color: #ff4081;
    user-select:none;
  }
  p, li {
    line-height: 1.5;
    font-weight: 400;
    font-size: 1.1rem;
  }
  ul {
    list-style-type: disc;
    margin-left: 1.7rem;
  }
  code {
    background: #222;
    padding: 0.3rem 0.6rem;
    border-radius: 8px;
    font-family: 'Courier New', Courier, monospace;
    font-weight: 600;
    color: #ff79a1;
  }
  button, .btn {
    background: #ff4081;
    color: white;
    border: none;
    border-radius: 14px;
    padding: 0.85rem 1.8rem;
    font-weight: 700;
    font-size: 1.05rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select:none;
  }
  button:hover, .btn:hover, button:focus, .btn:focus {
    background: #e73370;
    outline:none;
  }
  /* Modal styling */
  .modal {
    position: fixed;
    top: 0; left: 0; right:0; bottom:0;
    background: rgba(0,0,0,0.85);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    padding: 1rem;
  }
  .modal.active {
    display: flex;
  }
  .modal-content {
    background: #1a1a2e;
    border-radius: 20px;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 2rem 2.5rem;
    box-shadow: 0 0 40px #ff4081aa;
    color: #eee;
    position: relative;
  }
  .modal-content h3 {
    margin-top: 0;
    font-weight: 800;
    color: #ff4081;
    user-select:none;
  }
  .modal-close {
    position: absolute;
    top: 1.2rem;
    right: 1.2rem;
    background: transparent;
    border: none;
    font-size: 2rem;
    color: #ff4081;
    cursor: pointer;
    user-select:none;
    transition: color 0.25s ease;
  }
  .modal-close:hover, .modal-close:focus {
    color: #ff79a1;
    outline:none;
  }
  .modal-content a {
    color: #ff79a1;
    text-decoration: underline;
  }
  .modal-content a:hover {
    color: #ffb1d6;
  }
  /* Comments Section */
  #comments-section {
    background: #211a2dcc;
    border-radius: 20px;
    padding: 1.5rem 2rem;
    box-shadow: 0 0 35px #ff4081bb;
  }
  #comments-section h2 {
    margin-bottom: 1.2rem;
  }
  #comments-list {
    max-height: 320px;
    overflow-y: auto;
    margin-bottom: 1rem;
    border: 1.8px solid #ff4081bb;
    padding: 1rem;
    border-radius: 14px;
    background: #330033cc;
    font-size: 1rem;
  }
  .comment {
    border-bottom: 1px solid #ff408188;
    padding-bottom: 0.6rem;
    margin-bottom: 0.7rem;
    color: #ffd4ec;
  }
  .comment:last-child {
    border-bottom: none;
  }
  .comment strong {
    color: #ff79a1;
    user-select:none;
  }
  .comment .comment-text {
    margin: 0.25rem 0 0.5rem 0;
    font-size: 1rem;
    line-height: 1.3;
  }
  .comment .comment-email {
    font-size: 0.85rem;
    color: #ff40818f;
    user-select:none;
  }
  .comment .reply-btn {
    font-size: 0.9rem;
    color: #ff4081cc;
    cursor: pointer;
    user-select:none;
    font-weight: 600;
    background: transparent;
    border: none;
    padding: 0;
    transition: color 0.3s ease;
  }
  .comment .reply-btn:hover, .comment .reply-btn:focus {
    color: #ff79a1;
    outline:none;
  }
  #comment-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  #comment-form label {
    font-weight: 600;
    font-size: 1rem;
  }
  #comment-form input[type="text"], 
  #comment-form input[type="email"],
  #comment-form textarea {
    padding: 0.7rem 1rem;
    border-radius: 15px;
    border: 1.5px solid #ff4081bb;
    background: #2a003d;
    color: #ffb3d9;
    font-size: 1rem;
    font-family: 'Poppins', sans-serif;
    resize: vertical;
    transition: border-color 0.3s ease;
  }
  #comment-form input[type="text"]:focus,
  #comment-form input[type="email"]:focus,
  #comment-form textarea:focus {
    border-color: #ff79a1;
    outline: none;
  }
  #comment-form textarea {
    min-height: 80px;
    max-height: 160px;
  }
  #comment-submit {
    align-self: flex-start;
    background: #ff4081;
    border: none;
    border-radius: 18px;
    color: white;
    font-weight: 700;
    cursor: pointer;
    padding: 0.85rem 2rem;
    font-size: 1.1rem;
    user-select:none;
    transition: background-color 0.3s ease;
  }
  #comment-submit:hover, #comment-submit:focus {
    background: #e73370;
    outline:none;
  }

  /* Reply Modal */
  #reply-modal .modal-content {
    max-width: 500px;
  }
  #reply-modal label {
    display: block;
    margin-top: 1rem;
    margin-bottom: 0.4rem;
    font-weight: 600;
    color: #ff79a1;
  }
  #reply-modal input, #reply-modal textarea {
    width: 100%;
  }
  #reply-modal textarea {
    min-height: 70px;
  }
  #reply-form button {
    margin-top: 1.4rem;
  }

  /* Footer links */
  #footer-links ul {
    list-style-type:none;
    padding-left:0;
  }
  #footer-links ul li {
    margin-bottom: 0.6rem;
  }
  #footer-links ul li a {
    color: #ff4081;
    text-decoration: underline;
    font-weight: 600;
    font-size: 1.1rem;
  }
  #footer-links ul li a:hover, #footer-links ul li a:focus {
    color: #ff79a1;
    outline:none;
  }

  /* Responsive */
  @media (max-width: 650px) {
    header {
      flex-direction: column;
      gap: 0.7rem;
      padding: 1rem 1rem;
    }
    header h1 {
      font-size: 1.4rem;
      text-align:center;
    }
    main {
      padding: 1rem 1rem;
      max-width: 100%;
    }
    section {
      padding: 1.6rem 1.2rem;
    }
    .clock {
      min-width: 110px;
      font-size: 0.9rem;
    }
    select#lang-select {
      font-size: 0.9rem;
      padding: 0.3rem 0.6rem;
    }
    #comments-list {
      max-height: 240px;
      font-size: 0.95rem;
    }
    #comment-form input, #comment-form textarea {
      font-size: 0.95rem;
    }
    #comment-submit {
      font-size: 1rem;
      padding: 0.7rem 1.5rem;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Fragments M√ºzik Botu</h1>
  <div class="clock-lang" aria-label="Saat ve dil se√ßimi">
    <div class="clock" id="clock" aria-live="polite" aria-atomic="true" role="timer">--:--:--</div>
    <select id="lang-select" aria-label="Dil se√ßimi" title="Dil se√ßimi">
      <option value="tr">T√ºrk√ße</option>
      <option value="en">English</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
    </select>
  </div>
</header>

<main>
  <!-- About -->
  <section id="about-section" tabindex="0" aria-label="Bot hakkƒ±nda">
    <h2 data-i18n="about_title">Fragments M√ºzik Botu</h2>
    <p data-i18n="about_desc">Fragments, Telegram √ºzerinden saniyeler i√ßinde ≈üarkƒ± indirmeni saƒülayan; sade, ≈üƒ±k ve g√º√ßl√º bir m√ºzik botudur. M√ºzik sadece bir ses deƒüil, bir tutkudur‚Ä¶ üé∂</p>
  </section>

  <!-- Commands -->
  <section id="commands-section" tabindex="0" aria-label="Bot komutlarƒ±">
    <h2 data-i18n="commands_title">Kullanƒ±labilir Komutlar</h2>
    <ul>
      <li><code>/durumum</code> ‚Üí Ka√ß ≈üarkƒ± indirdin?</li>
      <li><code>/surem</code> ‚Üí Premium s√ºren kaldƒ± mƒ±?</li>
      <li><code>/premiumol</code> ‚Üí Avantajlara g√∂z at</li>
      <li><code>/gecmisim</code> ‚Üí (Premium) Son 10 ≈üarkƒ±n</li>
    </ul>
  </section>

  <!-- Premium -->
  <section id="premium-section" tabindex="0" aria-label="Premium avantajlar">
    <h2 data-i18n="premium_title">Premium Ayrƒ±calƒ±klarƒ±</h2>
    <ul>
      <li>320 kbps y√ºksek kalite</li>
      <li>Hƒ±zlƒ± ve beklemesiz indirme</li>
      <li>≈ûarkƒ± ge√ßmi≈üine eri≈üim</li>
      <li>500 ≈üarkƒ±ya ula≈ütƒ±ƒüƒ±nda otomatik kalƒ±cƒ± premium</li>
      <li>Premium kutlamalarƒ± ve ayrƒ±calƒ±klƒ± kullanƒ±cƒ± deneyimi</li>
    </ul>
  </section>

  <!-- Rest time -->
  <section id="rest-section" tabindex="0" aria-label="G√ºnl√ºk dinlenme zamanƒ±">
    <h2 data-i18n="rest_title">G√ºnl√ºk Dinlenme Zamanƒ±</h2>
    <p>Fragments, her g√ºn saat 05:30 ‚Äì 11:07 arasƒ±nda kendini dinlenmeye alƒ±r.</p>
    <p>Bu saatlerde gelen komutlara ≈üu tatlƒ± mesajla cevap verir:</p>
    <blockquote>
      üîß √ñz√ºr dilerim Bal biraz dinlenmem gerekiyor sistemsel ve donanƒ±msal i√ßin.<br />
      üõ†Ô∏è ≈ûu anda dinleniyorum, dinlenmem bitince seni bilgilendireceƒüim.<br />
      ‚è≥ Dinlenmemin tahmini biti≈ü saati: 11:07<br /><br />
      ü§ç Anlayƒ±≈üƒ±n i√ßin √ßok te≈üekk√ºr ederim!
    </blockquote>
    <p>Saat 11:07‚Äôde ise seni ≈ü√∂yle kar≈üƒ±lar:</p>
    <blockquote>
      G√ºnaydƒ±nn Tatlƒ±m üíï Umarƒ±m g√ºn√ºn g√ºzel ge√ßer ve benimle bol bol ≈üarkƒ± dinlersin. Bakƒ±mdan √ßƒ±ktƒ±m, artƒ±k √ßalƒ±≈ütƒ±rabilirsin Rahat√ßaaa üé∂ (FRAGMENTS EKƒ∞Bƒ∞)
    </blockquote>
  </section>

  <!-- Note -->
  <section id="note-section" tabindex="0" aria-label="√ñnemli not">
    <h2 data-i18n="note_title">√ñnemli Not</h2>
    <p>Bot ≈üu an mobil cihaz √ºzerinden √ßalƒ±≈ümaktadƒ±r. Bu nedenle bazen k√º√ß√ºk gecikmeler olabilir.</p>
    <p>Ancak istediƒüin ≈üarkƒ±yƒ± kesinlikle sana ula≈ütƒ±rƒ±r. Sadece birazcƒ±k sabƒ±r‚Ä¶ üôè</p>
  </section>

  <!-- Developer -->
  <section id="developer-section" tabindex="0" aria-label="Geli≈ütirici bilgileri">
    <h2 data-i18n="developer_title">Geli≈ütirici</h2>
    <p><a href="https://t.me/l0110310132100101110105122" target="_blank" rel="noopener" style="color:#ff4081;">@l0110310132100101110105122</a></p>
    <p>Telegram √ºzerinden geli≈ütiriciye mesaj g√∂nderilmesine cevap verilmemektedir.<br />T√ºm destek ve sorularƒ±nƒ±z i√ßin yalnƒ±zca ≈üu e-posta adresini kullanƒ±n:<br />üì© <a href="mailto:contact@egeherz.com" style="color:#ff4081;">contact@egeherz.com</a></p>
  </section>

  <!-- Supporters -->
  <section id="supporters-section" tabindex="0" aria-label="Destek√ßiler">
    <h2 data-i18n="supporters_title">Fragments‚Äôƒ±n Kalbinde Yatan G√º√ß: Destek√ßiler</h2>
    <ul>
      <li><a href="https://t.me/Can_mod" target="_blank" rel="noopener" style="color:#ff79a1;">@Can_mod</a> ‚Äî Geli≈üime b√ºy√ºk katkƒ± saƒüladƒ±.</li>
      <li><a href="https://t.me/Sladgr" target="_blank" rel="noopener" style="color:#ff79a1;">@Sladgr</a> ‚Äî Fikirleriyle y√∂n verdi.</li>
    </ul>
    <p>Telegram √ºzerinden geli≈ütirici ve destek√ßilere mesaj g√∂ndermek kesinlikle yasaktƒ±r.<br />Bu t√ºr giri≈üimler bot tarafƒ±ndan algƒ±lanƒ±r, kullanƒ±cƒ± verileri kalƒ±cƒ± olarak silinir ve engellenir.<br />L√ºtfen yalnƒ±zca e-posta kullanƒ±nƒ±z: <a href="mailto:contact@egeherz.com" style="color:#ff4081;">contact@egeherz.com</a></p>
  </section>

  <!-- Comments Section -->
  <section id="comments-section" aria-label="Kullanƒ±cƒ± yorumlarƒ±">
    <h2>Kullanƒ±cƒ± Yorumlarƒ±</h2>
    <div id="comments-list" aria-live="polite" aria-relevant="additions"></div>
    
    <form id="comment-form" aria-label="Yorum g√∂nderme formu">
      <label for="name-input">Adƒ±nƒ±z</label>
      <input type="text" id="name-input" name="name" required aria-required="true" placeholder="Adƒ±nƒ±z" />
      
      <label for="email-input">E-posta</label>
      <input type="email" id="email-input" name="email" required aria-required="true" placeholder="E-posta adresiniz" />
      
      <label for="comment-input">Yorumunuz</label>
      <textarea id="comment-input" name="comment" rows="3" required aria-required="true" placeholder="Yorumunuzu yazƒ±n..."></textarea>
      
      <button type="submit" id="comment-submit">Yorumu G√∂nder</button>
    </form>
  </section>
</main>

<!-- Reply Modal -->
<div class="modal" id="reply-modal" role="dialog" aria-modal="true" aria-labelledby="reply-title" tabindex="-1">
  <div class="modal-content">
    <button class="modal-close" aria-label="Kapat">&times;</button>
    <h3 id="reply-title">Yoruma Yanƒ±t Ver</h3>
    <form id="reply-form" aria-label="Yanƒ±t g√∂nderme formu">
      <p><strong id="reply-to-name"></strong> adlƒ± kullanƒ±cƒ±ya yanƒ±t veriyorsunuz.</p>
      <label for="reply-name-input">Adƒ±nƒ±z</label>
      <input type="text" id="reply-name-input" name="replyName" required aria-required="true" placeholder="Adƒ±nƒ±z" />
      
      <label for="reply-email-input">E-posta</label>
      <input type="email" id="reply-email-input" name="replyEmail" required aria-required="true" placeholder="E-posta adresiniz" />
      
      <label for="reply-textarea">Yanƒ±tƒ±nƒ±z</label>
      <textarea id="reply-textarea" name="replyText" rows="4" required aria-required="true" placeholder="Yanƒ±tƒ±nƒ±zƒ± yazƒ±n..."></textarea>
      
      <button type="submit" id="reply-submit">Yanƒ±tƒ± G√∂nder</button>
    </form>
  </div>
</div>

<footer id="footer-links" aria-label="Baƒülantƒ±lar" style="text-align:center; padding-bottom:1.5rem; user-select:none;">
  <ul style="display:inline-flex; gap:1.6rem; flex-wrap:wrap; justify-content:center;">
    <li><a href="https://t.me/fragmentsduyuru" target="_blank" rel="noopener">Duyuru Kanalƒ±</a></li>
    <li><a href="https://t.me/fragmentsmuzik" target="_blank" rel="noopener">Test ve Topluluk Grubu</a></li>
    <li><a href="https://t.me/l0110310132100101110105122" target="_blank" rel="noopener">Geli≈ütirici</a></li>
  </ul>
</footer>

<script>
  // Saat ve tarih
  const clockEl = document.getElementById('clock');
  function updateClock() {
    const now = new Date();
    const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
    clockEl.textContent = now.toLocaleTimeString([], {hour12:false}) + ' - ' + now.toLocaleDateString(undefined, options);
  }
  setInterval(updateClock, 1000);
  updateClock();

  // Dil se√ßimi localStorage ile kalƒ±cƒ±
  const langSelect = document.getElementById('lang-select');
  const supportedLangs = ['tr','en','ru','ar'];
  const userLang = localStorage.getItem('fragmentsLang') || (navigator.language ? navigator.language.slice(0,2) : 'tr');
  langSelect.value = supportedLangs.includes(userLang) ? userLang : 'tr';

  const i18n = {
    tr: {
      about_title: "Fragments M√ºzik Botu",
      about_desc: "Fragments, Telegram √ºzerinden saniyeler i√ßinde ≈üarkƒ± indirmeni saƒülayan; sade, ≈üƒ±k ve g√º√ßl√º bir m√ºzik botudur. M√ºzik sadece bir ses deƒüil, bir tutkudur‚Ä¶ üé∂",
      commands_title: "Kullanƒ±labilir Komutlar",
      premium_title: "Premium Ayrƒ±calƒ±klarƒ±",
      rest_title: "G√ºnl√ºk Dinlenme Zamanƒ±",
      note_title: "√ñnemli Not",
      developer_title: "Geli≈ütirici",
      supporters_title: "Fragments‚Äôƒ±n Kalbinde Yatan G√º√ß: Destek√ßiler",
    },
    en: {
      about_title: "Fragments Music Bot",
      about_desc: "Fragments is a sleek, powerful music bot for Telegram that lets you download songs in seconds. Music is not just sound, it's a passion‚Ä¶ üé∂",
      commands_title: "Available Commands",
      premium_title: "Premium Privileges",
      rest_title: "Daily Rest Time",
      note_title: "Important Note",
      developer_title: "Developer",
      supporters_title: "The Heart of Fragments: Supporters",
    },
    ru: {
      about_title: "–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –±–æ—Ç Fragments",
      about_desc: "Fragments ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏ —Å—Ç–∏–ª—å–Ω—ã–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –±–æ—Ç –¥–ª—è Telegram, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–∫–∞—á–∏–≤–∞—Ç—å –ø–µ—Å–Ω–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—ã. –ú—É–∑—ã–∫–∞ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–≤—É–∫, —ç—Ç–æ —Å—Ç—Ä–∞—Å—Ç—å‚Ä¶ üé∂",
      commands_title: "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã",
      premium_title: "–ü—Ä–µ–º–∏—É–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞",
      rest_title: "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞",
      note_title: "–í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ",
      developer_title: "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",
      supporters_title: "–°–µ—Ä–¥—Ü–µ Fragments: –ü–æ–¥–¥–µ—Ä–∂–∫–∞",
    },
    ar: {
      about_title: "ÿ®Ÿàÿ™ ŸÅÿ±ÿßÿ∫ŸÖŸÜÿ™ÿ≥ ŸÑŸÑŸÖŸàÿ≥ŸäŸÇŸâ",
      about_desc: "ŸÅÿ±ÿßÿ∫ŸÖŸÜÿ™ÿ≥ ŸáŸà ÿ®Ÿàÿ™ ŸÖŸàÿ≥ŸäŸÇŸâ ÿ£ŸÜŸäŸÇ ŸàŸÇŸàŸä ŸÑÿ™ŸÑŸäÿ¨ÿ±ÿßŸÖ Ÿäÿ≥ŸÖÿ≠ ŸÑŸÉ ÿ®ÿ™ŸÜÿ≤ŸäŸÑ ÿßŸÑÿ£ÿ∫ÿßŸÜŸä ÿÆŸÑÿßŸÑ ÿ´ŸàÿßŸÜŸç. ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ŸÑŸäÿ≥ÿ™ ŸÖÿ¨ÿ±ÿØ ÿµŸàÿ™ÿå ÿ•ŸÜŸáÿß ÿ¥ÿ∫ŸÅ‚Ä¶ üé∂",
      commands_title: "ÿßŸÑÿ£ŸàÿßŸÖÿ± ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©",
      premium_title: "ÿßŸÖÿ™Ÿäÿßÿ≤ÿßÿ™ ÿ®ÿ±ŸäŸÖŸäŸàŸÖ",
      rest_title: "ŸàŸÇÿ™ ÿßŸÑÿ±ÿßÿ≠ÿ© ÿßŸÑŸäŸàŸÖŸä",
      note_title: "ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÖŸáŸÖÿ©",
      developer_title: "ÿßŸÑŸÖÿ∑Ÿàÿ±",
      supporters_title: "ŸÇŸÑÿ® ŸÅÿ±ÿßÿ∫ŸÖŸÜÿ™ÿ≥: ÿßŸÑÿØÿßÿπŸÖŸäŸÜ",
    }
  };

  function setLanguage(lang) {
    localStorage.setItem('fragmentsLang', lang);
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if(i18n[lang] && i18n[lang][key]) {
        el.textContent = i18n[lang][key];
      }
    });
  }
  setLanguage(langSelect.value);
  langSelect.addEventListener('change', e => {
    setLanguage(e.target.value);
  });

  // Modal Setup
  function setupModal(id, triggerSelectors) {
    const modal = document.getElementById(id);
    const closeBtn = modal.querySelector('.modal-close');

    triggerSelectors.forEach(sel => {
      document.querySelectorAll(sel).forEach(btn => {
        btn.addEventListener('click', () => {
          modal.classList.add('active');
          modal.setAttribute('tabindex', '-1');
          modal.focus();
        });
      });
    });

    closeBtn.addEventListener('click', () => {
      modal.classList.remove('active');
    });

    window.addEventListener('keydown', e => {
      if(e.key === 'Escape' && modal.classList.contains('active')) {
        modal.classList.remove('active');
      }
    });
  }
  setupModal('reply-modal', []);

  // Comment system with reply feature & "sending email" simulation
  const commentsList = document.getElementById('comments-list');
  const commentForm = document.getElementById('comment-form');
  const commentNameInput = document.getElementById('name-input');
  const commentEmailInput = document.getElementById('email-input');
  const commentTextInput = document.getElementById('comment-input');

  const replyModal = document.getElementById('reply-modal');
  const replyForm = document.getElementById('reply-form');
  const replyToName = document.getElementById('reply-to-name');
  const replyNameInput = document.getElementById('reply-name-input');
  const replyEmailInput = document.getElementById('reply-email-input');
  const replyTextarea = document.getElementById('reply-textarea');

  let comments = JSON.parse(localStorage.getItem('fragmentsComments') || '[]');

  function renderComments() {
    commentsList.innerHTML = '';
    comments.forEach((c, i) => {
      const div = document.createElement('div');
      div.classList.add('comment');
      div.setAttribute('data-index', i);
      div.innerHTML = `
        <strong>${escapeHTML(c.name)}</strong> <span class="comment-email">&lt;${escapeHTML(c.email)}&gt;</span>
        <p class="comment-text">${escapeHTML(c.text)}</p>
        ${c.reply ? `<div style="margin-left:1rem; border-left: 2px solid #ff4081; padding-left: 0.8rem; margin-top:0.3rem;">
        <strong>Yanƒ±t:</strong> <p>${escapeHTML(c.reply.text)}</p>
        </div>` : ''}
        <button class="reply-btn" aria-label="Yanƒ±tla" title="Yanƒ±tla">Yanƒ±tla</button>
      `;
      commentsList.appendChild(div);
    });
  }

  // HTML escape to prevent XSS
  function escapeHTML(text) {
    return text.replace(/[&<>"']/g, function(m) {
      return {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;'
      }[m];
    });
  }

  // Open reply modal and prefill who we reply to
  commentsList.addEventListener('click', e => {
    if(e.target.classList.contains('reply-btn')) {
      const commentDiv = e.target.closest('.comment');
      const idx = commentDiv.getAttribute('data-index');
      replyToName.textContent = comments[idx].name;
      replyModal.classList.add('active');
      replyNameInput.value = '';
      replyEmailInput.value = '';
      replyTextarea.value = '';
      replyModal.dataset.replyIndex = idx;
      replyNameInput.focus();
    }
  });

  // Submit new comment
  commentForm.addEventListener('submit', e => {
    e.preventDefault();
    if(!commentNameInput.value.trim() || !commentEmailInput.value.trim() || !commentTextInput.value.trim()) {
      alert('L√ºtfen t√ºm alanlarƒ± doldurun!');
      return;
    }
    comments.push({
      name: commentNameInput.value.trim(),
      email: commentEmailInput.value.trim(),
      text: commentTextInput.value.trim(),
      reply: null
    });
    localStorage.setItem('fragmentsComments', JSON.stringify(comments));
    commentForm.reset();
    renderComments();
  });

  // Submit reply and simulate sending email to original commenter
  replyForm.addEventListener('submit', e => {
    e.preventDefault();
    if(!replyNameInput.value.trim() || !replyEmailInput.value.trim() || !replyTextarea.value.trim()) {
      alert('L√ºtfen t√ºm alanlarƒ± doldurun!');
      return;
    }
    const idx = parseInt(replyModal.dataset.replyIndex);
    comments[idx].reply = {
      name: replyNameInput.value.trim(),
      email: replyEmailInput.value.trim(),
      text: replyTextarea.value.trim()
    };
    localStorage.setItem('fragmentsComments', JSON.stringify(comments));
    renderComments();
    replyModal.classList.remove('active');

    // Burada ger√ßek mail g√∂nderme backend entegrasyonu yapƒ±labilir.
    // √ñrnek: fetch('/api/sendMail', { method: 'POST', body: JSON.stringify({...}) })

    alert(`Yanƒ±t g√∂nderildi!\n"${comments[idx].name}" kullanƒ±cƒ±sƒ±na mail g√∂nderildi (sim√ºlasyon).`);
  });

  renderComments();
</script>

</body>
</html>
