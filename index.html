<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Fragments Müzik Botu</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');
  *, *::before, *::after { box-sizing: border-box; }
  body {
    margin: 0; padding: 0;
    font-family: 'Montserrat', sans-serif;
    background: url('https://i.imgur.com/xNOMlPs.jpeg') no-repeat center center fixed;
    background-size: cover;
    color: #e0e0e0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    user-select: none;
    overflow-x: hidden;
  }
  body::before {
    content: '';
    position: fixed; top: 0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.65);
    backdrop-filter: blur(5px);
    z-index: -1;
  }

  header {
    width: 100%;
    padding: 10px 18px;
    background: rgba(0,0,0,0.7);
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 13px;
    color: #c0c0c0;
    letter-spacing: 0.05em;
  }
  header .logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  header .logo img {
    height: 30px; width: 30px; object-fit: contain;
    filter: drop-shadow(0 0 1px #00f0cc);
    transition: transform 0.3s ease;
  }
  header .logo img:hover {
    transform: rotate(12deg) scale(1.1);
  }
  header .time {
    font-weight: 600;
    font-variant-numeric: tabular-nums;
  }
  header .lang-select {
    background: transparent;
    border: 1.5px solid #00cec9;
    border-radius: 24px;
    color: #00cec9;
    font-weight: 700;
    font-size: 13px;
    cursor: pointer;
    padding: 4px 14px;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  header .lang-select:hover, header .lang-select:focus {
    background-color: #00cec9;
    color: #121212;
    outline: none;
  }

  main {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 25px 20px 10px;
    text-align: center;
    text-shadow:
      0 0 12px #000000dd,
      0 0 20px #00cec9aa;
  }
  main h1 {
    font-size: 2.8rem;
    font-weight: 800;
    margin-bottom: 10px;
    color: #00cec9;
    letter-spacing: 0.04em;
    animation: fadeInDown 1.2s ease forwards;
  }
  main p.subtitle {
    font-size: 1.2rem;
    max-width: 400px;
    line-height: 1.45;
    margin-bottom: 38px;
    color: #b0f0e6dd;
    animation: fadeInUp 1.2s ease forwards;
  }
  .btn-container {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
    max-width: 460px;
    margin-bottom: 20px;
  }
  button.open-modal-btn {
    background: linear-gradient(135deg, #00cec9, #008080);
    border: none;
    padding: 14px 30px;
    font-weight: 700;
    font-size: 1rem;
    color: #121212;
    border-radius: 30px;
    box-shadow:
      0 6px 10px rgb(0 206 201 / 0.6),
      0 2px 6px rgb(0 206 201 / 0.5);
    cursor: pointer;
    transition:
      background-position 0.45s ease,
      box-shadow 0.3s ease,
      color 0.3s ease;
    background-size: 200% 200%;
    background-position: left center;
    flex: 1 1 140px;
    min-width: 140px;
  }
  button.open-modal-btn:hover,
  button.open-modal-btn:focus {
    background-position: right center;
    color: #f0fdfa;
    box-shadow:
      0 12px 20px rgb(0 230 230 / 0.8),
      0 6px 12px rgb(0 230 230 / 0.6);
    outline: none;
  }
  a.open-modal-btn {
    text-decoration: none;
  }

  /* Modal overlay */
  .modal-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.95);
    display: none;
    justify-content: center;
    align-items: center;
    padding: 20px;
    z-index: 9999;
    overflow-y: auto;
  }
  .modal-overlay.active {
    display: flex;
    animation: fadeIn 0.3s ease forwards;
  }
  .modal {
    background: #111111ee;
    border-radius: 14px;
    width: 95%;
    max-width: 620px;
    max-height: 85vh;
    overflow-y: auto;
    color: #e0e0e0;
    box-shadow: 0 0 30px #00d4b3aa;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.3s ease forwards;
    outline: none;
  }
  .modal header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px 16px;
    border-bottom: 1px solid #00d4b3cc;
    font-weight: 700;
    font-size: 1.45rem;
    color: #00e6ca;
  }
  .modal header .close-btn {
    background: transparent;
    border: none;
    font-size: 1.9rem;
    color: #00e6ca;
    cursor: pointer;
    transition: color 0.25s ease;
  }
  .modal header .close-btn:hover,
  .modal header .close-btn:focus {
    color: #009974;
    outline: none;
  }
  .modal nav {
    display: flex;
    border-bottom: 1.7px solid #00d4b388;
    background: #111111dd;
  }
  .modal nav button {
    flex: 1;
    padding: 14px 12px;
    border: none;
    background: transparent;
    color: #6ef2db;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  .modal nav button.active {
    background: #00e6ca;
    color: #111111;
    border-radius: 14px 14px 0 0;
    box-shadow:
      0 0 8px #00e6caaa,
      0 0 15px #00e6ca99;
  }
  .modal section.content {
    padding: 24px 28px 28px;
    font-size: 1rem;
    line-height: 1.5;
    color: #c9f9f2cc;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    scrollbar-width: thin;
    scrollbar-color: #00e6ca33 transparent;
  }
  .modal section.content a {
    color: #00e6ca;
    text-decoration: none;
    font-weight: 600;
    transition: text-decoration 0.25s ease;
  }
  .modal section.content a:hover,
  .modal section.content a:focus {
    text-decoration: underline;
    outline: none;
  }
  .modal section.content::-webkit-scrollbar {
    width: 6px;
  }
  .modal section.content::-webkit-scrollbar-thumb {
    background: #00d4b3bb;
    border-radius: 12px;
  }

  /* Yorum alanı */
  #comment-section {
    background: rgba(0,0,0,0.55);
    max-width: 600px;
    margin: 0 auto 40px;
    border-radius: 14px;
    padding: 20px 25px;
    box-shadow: 0 0 25px #00e6caaa;
  }
  #comment-section h2 {
    color: #00cec9;
    font-weight: 700;
    margin-bottom: 12px;
    font-size: 1.6rem;
  }
  #comment-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  #comment-form input[type="text"],
  #comment-form textarea {
    background: #222222cc;
    border: none;
    border-radius: 10px;
    color: #d0f4f2;
    padding: 12px 15px;
    font-size: 1rem;
    resize: vertical;
    font-family: 'Montserrat', sans-serif;
    box-shadow:
      inset 0 0 6px #00cec9aa;
  }
  #comment-form input[type="text"]:focus,
  #comment-form textarea:focus {
    outline: 2px solid #00e6ca;
    background: #222222ee;
  }
  #comment-form textarea {
    min-height: 60px;
    max-height: 140px;
  }
  #comment-form button {
    background: linear-gradient(135deg, #00cec9, #008080);
    border: none;
    padding: 12px 0;
    font-weight: 700;
    font-size: 1rem;
    color: #121212;
    border-radius: 30px;
    box-shadow:
      0 6px 10px rgb(0 206 201 / 0.6),
      0 2px 6px rgb(0 206 201 / 0.5);
    cursor: pointer;
    transition:
      background-position 0.45s ease,
      box-shadow 0.3s ease,
      color 0.3s ease;
    background-size: 200% 200%;
    background-position: left center;
    max-width: 150px;
    align-self: flex-end;
  }
  #comment-form button:hover,
  #comment-form button:focus {
    background-position: right center;
    color: #f0fdfa;
    box-shadow:
      0 12px 20px rgb(0 230 230 / 0.8),
      0 6px 12px rgb(0 230 230 / 0.6);
    outline: none;
  }

  #comments-list {
    margin-top: 25px;
    max-height: 320px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #00e6ca33 transparent;
  }
  #comments-list::-webkit-scrollbar {
    width: 7px;
  }
  #comments-list::-webkit-scrollbar-thumb {
    background: #00d4b3bb;
    border-radius: 12px;
  }

  .comment {
    background: #121212dd;
    border-radius: 12px;
    padding: 14px 18px;
    margin-bottom: 14px;
    box-shadow:
      0 0 10px #00d4b3aa;
    word-wrap: break-word;
    position: relative;
  }
  .comment .comment-name {
    font-weight: 700;
    color: #00cec9;
    margin-bottom: 6px;
  }
  .comment .comment-text {
    font-size: 1rem;
    white-space: pre-wrap;
    color: #c9f9f2cc;
    margin-bottom: 8px;
  }
  .comment .comment-reply {
    margin-left: 12px;
    margin-top: 6px;
    border-left: 3px solid #00cec9;
    padding-left: 12px;
    font-style: italic;
    color: #66e4dbbb;
  }
  .comment .comment-meta {
    font-size: 0.75rem;
    color: #66e4db99;
  }
  .comment .comment-actions {
    position: absolute;
    top: 12px;
    right: 18px;
    display: flex;
    gap: 8px;
  }
  .comment .comment-actions button {
    background: transparent;
    border: none;
    color: #00cec9;
    cursor: pointer;
    font-weight: 700;
    font-size: 0.9rem;
    transition: color 0.25s ease;
    padding: 0 6px;
  }
  .comment .comment-actions button:hover,
  .comment .comment-actions button:focus {
    color: #009974;
    outline: none;
  }

  /* Admin panel küçük alt kısım */
  #admin-panel {
    background: #111111dd;
    padding: 14px 20px;
    box-shadow: 0 0 15px #00e6caaa;
    max-width: 600px;
    margin: 0 auto 40px;
    border-radius: 14px;
    color: #00cec9;
    font-size: 0.9rem;
    user-select: none;
  }
  #admin-panel label {
    font-weight: 700;
    margin-right: 12px;
  }
  #admin-panel input[type="password"] {
    background: #222222cc;
    border: none;
    border-radius: 10px;
    color: #d0f4f2;
    padding: 6px 12px;
    font-size: 1rem;
    width: 180px;
    box-shadow: inset 0 0 6px #00cec9aa;
    margin-right: 10px;
  }
  #admin-panel button {
    background: linear-gradient(135deg, #00cec9, #008080);
    border: none;
    padding: 6px 18px;
    font-weight: 700;
    font-size: 1rem;
    color: #121212;
    border-radius: 30px;
    box-shadow:
      0 6px 10px rgb(0 206 201 / 0.6),
      0 2px 6px rgb(0 206 201 / 0.5);
    cursor: pointer;
    transition:
      background-position 0.45s ease,
      box-shadow 0.3s ease,
      color 0.3s ease;
    background-size: 200% 200%;
    background-position: left center;
    vertical-align: middle;
  }
  #admin-panel button:hover,
  #admin-panel button:focus {
    background-position: right center;
    color: #f0fdfa;
    box-shadow:
      0 12px 20px rgb(0 230 230 / 0.8),
      0 6px 12px rgb(0 230 230 / 0.6);
    outline: none;
  }
  #admin-msg {
    margin-left: 10px;
    font-style: italic;
    font-size: 0.9rem;
    color: #00e6ca;
  }
  #admin-error {
    color: #ff6b6b;
    font-weight: 700;
    margin-left: 10px;
  }

  /* Responsive & mobile tweaks */
  @media (max-width: 480px) {
    main h1 {
      font-size: 2rem;
    }
    main p.subtitle {
      font-size: 1rem;
      max-width: 90vw;
    }
    button.open-modal-btn {
      min-width: 130px;
      padding: 12px 16px;
      font-size: 0.95rem;
    }
    .modal {
      max-width: 95vw;
    }
    .modal header {
      font-size: 1.25rem;
      padding: 16px 20px 14px;
    }
    .modal nav button {
      font-size: 1rem;
      padding: 10px 6px;
    }
    footer {
      font-size: 12px;
      padding: 14px 8px;
    }
    footer a {
      margin: 0 6px;
      font-size: 12px;
    }
    #comment-section {
      padding: 15px 18px;
      margin-bottom: 30px;
    }
    #admin-panel {
      padding: 12px 15px;
      font-size: 0.85rem;
      max-width: 90vw;
    }
  }

  /* Animations */
  @keyframes fadeInDown {
    0% {opacity:0; transform: translateY(-20px);}
    100% {opacity:1; transform: translateY(0);}
  }
  @keyframes fadeInUp {
    0% {opacity:0; transform: translateY(20px);}
    100% {opacity:1; transform: translateY(0);}
  }
  @keyframes fadeIn {
    0% {opacity: 0;}
    100% {opacity: 1;}
  }
  @keyframes slideUp {
    0% {opacity: 0; transform: translateY(15px);}
    100% {opacity: 1; transform: translateY(0);}
  }
</style>
</head>
<body>

<header>
  <div class="logo" aria-label="Telegram Logo and Site Name">
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Logo" />
    <span>Fragments Bot</span>
  </div>
  <div class="time" id="time-display" aria-live="polite" aria-atomic="true"></div>
  <select class="lang-select" id="lang-select" aria-label="Dil seçimi">
    <option value="tr">Türkçe</option>
    <option value="en">English</option>
    <option value="ru">Русский</option>
    <option value="ar">العربية</option>
  </select>
</header>

<main role="main" aria-labelledby="main-title">
  <h1 id="main-title">🎧 Fragments Müzik Botu</h1>
  <p class="subtitle" id="main-subtitle">
    Telegram üzerinden saniyeler içinde şarkı indirmeni sağlayan, sade, şık ve güçlü bir müzik botudur.
  </p>

  <section class="btn-container" role="navigation" aria-label="Bot ile ilgili modalları açan butonlar">
    <button class="open-modal-btn" data-modal="commands" aria-haspopup="dialog" aria-expanded="false" aria-controls="modal-overlay">Komutlar</button>
    <button class="open-modal-btn" data-modal="privacy" aria-haspopup="dialog" aria-expanded="false" aria-controls="modal-overlay">Gizlilik Politikası</button>
    <button class="open-modal-btn" data-modal="terms" aria-haspopup="dialog" aria-expanded="false" aria-controls="modal-overlay">Kullanım Koşulları</button>
    <button class="open-modal-btn" data-modal="links" aria-haspopup="dialog" aria-expanded="false" aria-controls="modal-overlay">Bağlantılar</button>
  </section>

  <!-- Yorumlar ve form -->
  <section id="comment-section" aria-label="Yorumlar ve yeni yorum formu">
    <h2>Yorumlar</h2>
    <form id="comment-form" aria-describedby="comment-form-desc" novalidate>
      <label for="comment-name" class="visually-hidden">İsim</label>
      <input type="text" id="comment-name" name="name" placeholder="Adınız" aria-required="true" autocomplete="off" />
      <label for="comment-text" class="visually-hidden">Yorum</label>
      <textarea id="comment-text" name="comment" rows="3" placeholder="Yorumunuz" aria-required="true"></textarea>
      <button type="submit" aria-label="Yorum gönder">Gönder</button>
    </form>

    <div id="comments-list" aria-live="polite" aria-relevant="additions"></div>
  </section>
</main>

<!-- Admin Panel -->
<section id="admin-panel" aria-label="Admin Paneli, yorum yönetimi" hidden>
  <label for="admin-password">Admin Şifre:</label>
  <input type="password" id="admin-password" aria-describedby="admin-msg admin-error" autocomplete="off" />
  <button id="admin-login-btn" aria-label="Admin girişi yap">Giriş</button>
  <span id="admin-msg" role="status" aria-live="polite"></span>
  <span id="admin-error" role="alert"></span>
</section>

<!-- Modal -->
<div id="modal-overlay" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" hidden>
  <div class="modal" role="document" tabindex="0">
    <header>
      <h3 id="modal-title">Komutlar</h3>
      <button class="close-btn" aria-label="Kapat">&times;</button>
    </header>
    <nav role="tablist" aria-label="Modal İçerik Sekmeleri">
      <button class="tab-btn active" data-tab="commands" id="tab-commands" role="tab" aria-selected="true" aria-controls="modal-content">Komutlar</button>
      <button class="tab-btn" data-tab="privacy" id="tab-privacy" role="tab" aria-selected="false" aria-controls="modal-content">Gizlilik Politikası</button>
      <button class="tab-btn" data-tab="terms" id="tab-terms" role="tab" aria-selected="false" aria-controls="modal-content">Kullanım Koşulları</button>
      <button class="tab-btn" data-tab="links" id="tab-links" role="tab" aria-selected="false" aria-controls="modal-content">Bağlantılar</button>
    </nav>
    <section id="content-area" class="content" tabindex="0" aria-live="polite" aria-atomic="true" aria-label="Modal içerik"></section>
  </div>
</div>

<script>
  // Dil ve içerik
  const content = {
    tr: {
      commands: `
• /sarki - Şarkı indir
• /surem - Premium süreni gör
• /premiumol - Premium avantajlarını öğren
• /gecmisim - (Premium) Son 10 şarkın
• /hediyepremium [id] - (Admin) Premium hediye et
• /bakimac - (Admin) Bakım modunu aç
• /bakimkapat - (Admin) Bakım modunu kapat
      `,
      privacy: `
Fragments bot, gizliliğinize önem verir. Verileriniz sadece botun doğru çalışması için kullanılır, üçüncü taraflarla paylaşılmaz.

Telegram üzerinden geliştiriciye veya destek hattına mesaj göndermek kesinlikle yasaktır.
🔒 Otomatik olarak tespit edilir, kullanıcı verileri silinir ve kullanıcı engellenir.
İletişim için sadece şu e-posta adresini kullanınız:
📩 contact@egeherz.com
      `,
      terms: `
Fragments botu kullanarak:
- Bot sadece müzik indirmek için kullanılmalıdır.
- Geliştirici uyarılarına uyun, bot stabil kalır.
- Yasadışı kullanımdan kaçının.
- Tüm sorumluluk kullanıcıya aittir.

Sorularınız için: contact@egeherz.com
      `,
      links: `
<a href="https://t.me/fragmentsduyuru" target="_blank" rel="noopener noreferrer">📢 Duyuru Kanalı</a><br/>
<a href="https://t.me/fragmentsmuzik" target="_blank" rel="noopener noreferrer">👥 Topluluk</a><br/>
<a href="https://t.me/l0110310132100101110105122" target="_blank" rel="noopener noreferrer">👨‍💻 Geliştirici</a><br/>
<a href="https://t.me/FragmentsofmeBOT" target="_blank" rel="noopener noreferrer">🤖 Botu Aç</a>
      `
    },
    en: {
      commands: `
• /sarki - Download a song
• /surem - Check premium time
• /premiumol - See premium advantages
• /gecmisim - (Premium) Last 10 songs
• /hediyepremium [id] - (Admin) Gift premium
• /bakimac - (Admin) Enable maintenance
• /bakimkapat - (Admin) Disable maintenance
      `,
      privacy: `
Fragments bot respects your privacy. Your data is only used to ensure proper operation and is not shared with third parties.

Sending messages to developer or support on Telegram is strictly forbidden.
🔒 Attempts are auto-detected, data deleted, and user banned.
Please use only this email:
📩 contact@egeherz.com
      `,
      terms: `
By using Fragments bot:
- Bot is only for downloading music.
- Follow developer warnings to keep stability.
- Avoid illegal usage.
- Responsibility lies with user.

Questions? Contact contact@egeherz.com
      `,
      links: `
<a href="https://t.me/fragmentsduyuru" target="_blank" rel="noopener noreferrer">📢 Announcement Channel</a><br/>
<a href="https://t.me/fragmentsmuzik" target="_blank" rel="noopener noreferrer">👥 Community</a><br/>
<a href="https://t.me/l0110310132100101110105122" target="_blank" rel="noopener noreferrer">👨‍💻 Developer</a><br/>
<a href="https://t.me/FragmentsofmeBOT" target="_blank" rel="noopener noreferrer">🤖 Open Bot</a>
      `
    },
    ru: {
      commands: `
• /sarki - Скачать песню
• /surem - Проверить премиум время
• /premiumol - Посмотреть преимущества премиума
• /gecmisim - (Премиум) Последние 10 песен
• /hediyepremium [id] - (Админ) Подарить премиум
• /bakimac - (Админ) Включить режим обслуживания
• /bakimkapat - (Админ) Выключить режим обслуживания
      `,
      privacy: `
Бот Fragments заботится о вашей конфиденциальности. Ваши данные используются только для корректной работы и не передаются третьим лицам.

Отправка сообщений разработчику или поддержке в Telegram строго запрещена.
🔒 Попытки автоматически обнаруживаются, данные пользователя удаляются и пользователь блокируется.
Пожалуйста, используйте только этот e-mail для связи:
📩 contact@egeherz.com
      `,
      terms: `
Используя бота Fragments, вы соглашаетесь с:
- Бот предназначен только для скачивания музыки.
- Следуйте предупреждениям разработчика для стабильности.
- Избегайте незаконного использования.
- Вы несете полную ответственность.

Вопросы? Пишите contact@egeherz.com.
      `,
      links: `
<a href="https://t.me/fragmentsduyuru" target="_blank" rel="noopener noreferrer">📢 Канал объявлений</a><br/>
<a href="https://t.me/fragmentsmuzik" target="_blank" rel="noopener noreferrer">👥 Сообщество</a><br/>
<a href="https://t.me/l0110310132100101110105122" target="_blank" rel="noopener noreferrer">👨‍💻 Разработчик</a><br/>
<a href="https://t.me/FragmentsofmeBOT" target="_blank" rel="noopener noreferrer">🤖 Открыть бота</a>
      `
    },
    ar: {
      commands: `
• /surem - عرض مدة البريميوم
• /premiumol - عرض مزايا البريميوم
• /gecmisim - (بريميوم) عرض آخر 10 أغاني
• /hediyepremium [id] - (مدير) منح بريميوم
• /bakimac - (مدير) تفعيل وضع الصيانة
• /bakimkapat - (مدير) تعطيل وضع الصيانة
      `,
      privacy: `
بوت فراغمنتس يحترم خصوصيتك.
تُستخدم البيانات فقط لتحسين أداء البوت وتجربة المستخدم.
لا يتم مشاركة بياناتك مع أي طرف ثالث.

الرسائل إلى المطور أو الدعم عبر Telegram ممنوعة.
🔒 يتم كشف هذه المحاولات آليًا، وتحذف جميع بيانات المستخدم، ويُحظر المستخدم.
يرجى استخدام البريد الإلكتروني فقط:
📩 contact@egeherz.com
      `,
      terms: `
باستخدام بوت فراغمنتس، أنت توافق على الشروط التالية:
- البوت مخصص لتنزيل الموسيقى فقط.
- اتبع تحذيرات المطور للحفاظ على استقرار الخدمة.
- يمنع الاستخدام غير القانوني أو الضار.
- المسؤولية تقع على المستخدم.

لأي استفسارات، يرجى مراسلة contact@egeherz.com.
      `,
      links: `
<a href="https://t.me/fragmentsduyuru" target="_blank" rel="noopener noreferrer">📢 قناة الإعلانات</a><br/>
<a href="https://t.me/fragmentsmuzik" target="_blank" rel="noopener noreferrer">👥 مجموعة المجتمع</a><br/>
<a href="https://t.me/l0110310132100101110105122" target="_blank" rel="noopener noreferrer">👨‍💻 المطور</a><br/>
<a href="https://t.me/FragmentsofmeBOT" target="_blank" rel="noopener noreferrer">🤖 افتح البوت</a>
      `
    }
  };

  // Saat ve tarih göstergesi
  function updateTime() {
    const now = new Date();
    const days = {
      tr: ['Pazar','Pazartesi','Salı','Çarşamba','Perşembe','Cuma','Cumartesi'],
      en: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],
      ru: ['Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота'],
      ar: ['الأحد','الإثنين','الثلاثاء','الأربعاء','الخميس','الجمعة','السبت']
    };
    const lang = localStorage.getItem('lang') || 'tr';
    const dayName = days[lang][now.getDay()];
    const h = now.getHours().toString().padStart(2,'0');
    const m = now.getMinutes().toString().padStart(2,'0');
    const s = now.getSeconds().toString().padStart(2,'0');
    const timeDisplay = document.getElementById('time-display');
    if(timeDisplay) timeDisplay.textContent = `${dayName}, ${h}:${m}:${s}`;
  }
  setInterval(updateTime, 1000);
  updateTime();

  // Dil değiştirme ve localStorage
  const langSelect = document.getElementById('lang-select');
  langSelect.addEventListener('change', e => {
    const lang = e.target.value;
    localStorage.setItem('lang', lang);
    updateTexts(lang);
  });

  // Sayfa yüklendiğinde dil ayarla
  document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'tr';
    langSelect.value = savedLang;
    updateTexts(savedLang);
  });

  // Modal & içerik yönetimi
  const modalOverlay = document.getElementById('modal-overlay');
  const modalTitle = document.getElementById('modal-title');
  const contentArea = document.getElementById('content-area');
  const closeBtn = modalOverlay.querySelector('.close-btn');
  const tabButtons = Array.from(modalOverlay.querySelectorAll('nav button.tab-btn'));
  const openModalButtons = Array.from(document.querySelectorAll('.open-modal-btn'));

  function updateTexts(lang) {
    const titles = {
      tr: ['🎧 Fragments Müzik Botu','Telegram üzerinden saniyeler içinde şarkı indirmeni sağlayan, sade, şık ve güçlü bir müzik botudur.'],
      en: ['🎧 Fragments Music Bot','A simple, stylish & powerful music bot that lets you download songs within seconds on Telegram.'],
      ru: ['🎧 Фрагменты Музыкальный Бот','Простой, стильный и мощный бот, позволяющий скачивать песни за секунды в Telegram.'],
      ar: ['🎧 بوت فراغمنتس للموسيقى','بوت بسيط وأنيق وقوي يمكنك من تنزيل الأغاني في ثوانٍ على تيليجرام.']
    };
    document.getElementById('main-title').textContent = titles[lang][0];
    document.getElementById('main-subtitle').textContent = titles[lang][1];

    // Modal default tab - commands
    modalTitle.textContent = {
      tr: 'Komutlar',
      en: 'Commands',
      ru: 'Команды',
      ar: 'الأوامر'
    }[lang];
    contentArea.innerHTML = content[lang].commands;

    tabButtons.forEach(btn => btn.classList.remove('active'));
    tabButtons[0].classList.add('active');

    document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
  }

  // Modal açma kapama
  openModalButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const modalName = btn.dataset.modal || 'commands';
      modalOverlay.classList.add('active');
      modalOverlay.hidden = false;
      setModalContent(modalName);
      modalOverlay.querySelector('.modal').focus();
      btn.setAttribute('aria-expanded','true');
    });
  });
  closeBtn.addEventListener('click', () => {
    modalOverlay.classList.remove('active');
    modalOverlay.hidden = true;
    openModalButtons.forEach(btn => btn.setAttribute('aria-expanded','false'));
  });
  window.addEventListener('keydown', e => {
    if(e.key === 'Escape' && modalOverlay.classList.contains('active')){
      modalOverlay.classList.remove('active');
      modalOverlay.hidden = true;
      openModalButtons.forEach(btn => btn.setAttribute('aria-expanded','false'));
    }
  });

  // Modal tab switching
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabButtons.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-selected', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-selected', 'true');
      setModalContent(btn.dataset.tab.replace('-tab',''));
    });
  });

  function setModalContent(tabName) {
    const lang = localStorage.getItem('lang') || 'tr';
    switch(tabName){
      case 'commands': 
        modalTitle.textContent = {tr:'Komutlar',en:'Commands',ru:'Команды',ar:'الأوامر'}[lang]; 
        contentArea.innerHTML = content[lang].commands; 
        contentArea.setAttribute('aria-labelledby','tab-commands');
        break;
      case 'privacy': 
        modalTitle.textContent = {tr:'Gizlilik Politikası',en:'Privacy Policy',ru:'Политика конфиденциальности',ar:'سياسة الخصوصية'}[lang]; 
        contentArea.innerHTML = content[lang].privacy;
        contentArea.setAttribute('aria-labelledby','tab-privacy');
        break;
      case 'terms': 
        modalTitle.textContent = {tr:'Kullanım Koşulları',en:'Terms of Use',ru:'Условия использования',ar:'شروط الاستخدام'}[lang]; 
        contentArea.innerHTML = content[lang].terms;
        contentArea.setAttribute('aria-labelledby','tab-terms');
        break;
      case 'links': 
        modalTitle.textContent = {tr:'Bağlantılar',en:'Links',ru:'Ссылки',ar:'روابط'}[lang]; 
        contentArea.innerHTML = content[lang].links;
        contentArea.setAttribute('aria-labelledby','tab-links');
        break;
      default:
        modalTitle.textContent = '';
        contentArea.innerHTML = '';
    }
  }

  // Yorumlar sistemi

  const commentForm = document.getElementById('comment-form');
  const commentsList = document.getElementById('comments-list');

  // Admin durumu ve şifresi
  const adminPassword = 'xFragmentS';
  const adminPanel = document.getElementById('admin-panel');
  const adminPasswordInput = document.getElementById('admin-password');
  const adminLoginBtn = document.getElementById('admin-login-btn');
  const adminMsg = document.getElementById('admin-msg');
  const adminError = document.getElementById('admin-error');

  let isAdmin = false;
  let editingCommentId = null;

  // Yorumlar localStorage’da
  function getComments(){
    try {
      const c = localStorage.getItem('fragments-comments');
      return c ? JSON.parse(c) : [];
    } catch(e) {
      return [];
    }
  }
  function saveComments(comments){
    localStorage.setItem('fragments-comments', JSON.stringify(comments));
  }

  // Yorumları render et
  function renderComments(){
    const comments = getComments();
    commentsList.innerHTML = '';
    if(comments.length === 0){
      commentsList.innerHTML = `<p style="color:#00cec999; font-style:italic;">${{
        tr:'Henüz yorum yok, ilk yorumu siz yazın!',
        en:'No comments yet, be the first!',
        ru:'Пока нет комментариев, будьте первым!',
        ar:'لا توجد تعليقات بعد، كن الأول!'
      }[localStorage.getItem('lang')||'tr']}</p>`;
      return;
    }
    comments.forEach((comment, idx) => {
      const div = document.createElement('div');
      div.className = 'comment';
      div.setAttribute('data-id', idx);
      div.setAttribute('tabindex','0');
      div.innerHTML = `
        <div class="comment-name">${escapeHTML(comment.name)}</div>
        <div class="comment-text">${escapeHTML(comment.text)}</div>
        ${comment.reply ? `<div class="comment-reply" aria-label="Admin yanıtı">${escapeHTML(comment.reply)}</div>` : ''}
        <div class="comment-meta">${new Date(comment.date).toLocaleString()}</div>
        ${isAdmin ? `
          <div class="comment-actions" role="group" aria-label="Yorum yönetim butonları">
            <button class="reply-btn" aria-label="Yanıtla">Yanıtla</button>
            <button class="edit-btn" aria-label="Düzenle">Düzenle</button>
            <button class="delete-btn" aria-label="Sil">Sil</button>
          </div>
        ` : ''}
      `;
      commentsList.appendChild(div);
    });
  }

  // Güvenli string gösterimi
  function escapeHTML(str) {
    if(!str) return '';
    return str.replace(/[&<>"']/g, function(m){
      return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];
    });
  }

  // Yeni yorum veya düzenleme gönderimi
  commentForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = commentForm['name'].value.trim();
    const text = commentForm['comment'].value.trim();

    if(name.length < 2){
      alert({tr:'Lütfen geçerli bir isim girin.',en:'Please enter a valid name.',ru:'Пожалуйста, введите действительное имя.',ar:'يرجى إدخال اسم صالح.'}[localStorage.getItem('lang')||'tr']);
      return;
    }
    if(text.length < 3){
      alert({tr:'Lütfen geçerli bir yorum yazın.',en:'Please enter a valid comment.',ru:'Пожалуйста, введите действительный комментарий.',ar:'يرجى إدخال تعليق صالح.'}[localStorage.getItem('lang')||'tr']);
      return;
    }

    let comments = getComments();
    if(editingCommentId !== null){
      // Düzenle
      if(!isAdmin){
        alert({tr:'Yorum düzenleme yetkiniz yok.',en:'You are not authorized to edit comments.',ru:'Вы не авторизованы для редактирования комментариев.',ar:'ليس لديك صلاحية لتحرير التعليقات.'}[localStorage.getItem('lang')||'tr']);
        return;
      }
      comments[editingCommentId].name = name;
      comments[editingCommentId].text = text;
      editingCommentId = null;
    } else {
      // Yeni yorum
      comments.push({name, text, reply:'', date: new Date().toISOString()});
    }
    saveComments(comments);
    commentForm.reset();
    renderComments();
  });

  // Admin giriş butonu
  adminLoginBtn.addEventListener('click', () => {
    const pass = adminPasswordInput.value.trim();
    adminError.textContent = '';
    if(pass === adminPassword){
      isAdmin = true;
      adminPanel.hidden = true;
      adminPasswordInput.value = '';
      adminMsg.textContent = {tr:'Admin giriş başarılı!',en:'Admin login successful!',ru:'Успешный вход администратора!',ar:'تم تسجيل دخول المسؤول بنجاح!'}[localStorage.getItem('lang')||'tr'];
      renderComments();
    } else {
      adminError.textContent = {tr:'Şifre yanlış!',en:'Wrong password!',ru:'Неверный пароль!',ar:'كلمة المرور خاطئة!'}[localStorage.getItem('lang')||'tr'];
    }
  });

  // Yorumlar üzerinde işlem butonları (delegation)
  commentsList.addEventListener('click', e => {
    if(!isAdmin) return;
    const commentDiv = e.target.closest('.comment');
    if(!commentDiv) return;
    const id = Number(commentDiv.dataset.id);
    if(e.target.classList.contains('delete-btn')){
      if(confirm({tr:'Bu yorumu silmek istediğinize emin misiniz?',en:'Are you sure you want to delete this comment?',ru:'Вы уверены, что хотите удалить этот комментарий?',ar:'هل أنت متأكد من حذف هذا التعليق؟'}[localStorage.getItem('lang')||'tr'])){
        const comments = getComments();
        comments.splice(id,1);
        saveComments(comments);
        renderComments();
      }
    }
    if(e.target.classList.contains('reply-btn')){
      const reply = prompt({tr:'Yoruma admin yanıtı yazınız:',en:'Enter admin reply to comment:',ru:'Введите ответ администратора на комментарий:',ar:'أدخل رد المسؤول على التعليق:'}[localStorage.getItem('lang')||'tr']);
      if(reply !== null){
        const comments = getComments();
        comments[id].reply = reply.trim();
        saveComments(comments);
        renderComments();
      }
    }
    if(e.target.classList.contains('edit-btn')){
      const comments = getComments();
      editingCommentId = id;
      commentForm['name'].value = comments[id].name;
      commentForm['comment'].value = comments[id].text;
      commentForm['comment'].focus();
    }
  });

  // İlk yüklemede yorumları göster
  renderComments();

</script>

<footer role="contentinfo" style="text-align:center; font-size:12px; padding:16px 10px; color:#00cec9cc; user-select:none;">
  &copy; 2025 Fragments Bot - Tüm hakları saklıdır.
</footer>

</body>
</html>
